<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>AI Docs Chat</title>
<style>
body { font-family: Arial, sans-serif; margin: 2rem; }
#chat { border: 1px solid #ccc; padding: 1rem; height: 400px; overflow-y: scroll; }
input[type=text] { width: 80%; padding: 0.5rem; }
button { padding: 0.5rem; }
.message { margin: 0.5rem 0; }
.user { font-weight: bold; color: blue; }
.bot { font-weight: bold; color: green; }
</style>
</head>
<body>
<h1>AI Docs Chat</h1>
<div id="chat"></div>
<input type="text" id="question" placeholder="Γράψε την ερώτησή σου...">
<button onclick="askQuestion()">Αποστολή</button>

<script>
async function askQuestion() {
    const input = document.getElementById('question');
    const chat = document.getElementById('chat');
    const question = input.value.trim();
    if (!question) return;

    const userDiv = document.createElement('div');
    userDiv.className = 'message user';
    userDiv.textContent = "Εσύ: " + question;
    chat.appendChild(userDiv);

    input.value = '';

    const res = await fetch('/api/ask?q=' + encodeURIComponent(question));
    const data = await res.json();

    const botDiv = document.createElement('div');
    botDiv.className = 'message bot';
    if (data.answer && data.answer.length > 0) {
        botDiv.innerHTML = data.answer.map(a => a.text).join("<hr>");
    } else {
        botDiv.textContent = "Δεν βρέθηκε απάντηση.";
    }
    chat.appendChild(botDiv);
    chat.scrollTop = chat.scrollHeight;
}
</script>
</body>
</html>
